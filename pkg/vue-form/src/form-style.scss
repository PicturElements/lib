@import "../../assets/scss-partials/utils";

// Basic input
.inp-input {
	input {
		width: 100%;
		padding: 6px 8px;
		background: transparent;
		border: 1px solid $wireframe-outline-col;
		font-size: 95%;
		outline: none;

		&:focus {
			border-color: $main-col
		}

		@include autofill($autofill-back, $main-col);
	}

	.validation-msg {
		display: none;
		position: absolute;
		bottom: 100%;
		left: 0;
		width: 100%;
		font-size: 80%;
		padding: 3px 7px;
		border-radius: 1px 1px 0 0;
		background: $main-col;
		color: $main-col-inverse;
	}

	&.error {
		input {
			&:not(:focus) {
				background: $dark-err-col;
				border-color: $alert-col;
				@include autofill($dark-err-col, $main-col);
			}

			&:focus + .validation-msg {
				display: block;
			}
		}
	}
}

// Radio
.inp-radio {
	position: relative;
	user-select: none;

	.radio-section {
		+ .radio-section {
			margin-top: 5px;
		}

		&.active .radio-option {
			&:before {
				content: "";
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				transform: scale(0.6);
				background: currentColor;
			}
		}
	}

	.radio-option {
		position: relative;
		width: 1.8em;
		height: 1.8em;
		background: transparent;
		border: 1px solid $wireframe-outline-col;
		padding: 0;
		outline: none;
		border-radius: 1px;
		flex-shrink: 0;

		&:focus {
			border-color: $main-col;
		}
	}

	.label {
		margin-left: 10px;
	}

	.radio-custom-content-wrapper {
		margin-left: 1.8em;
		padding-left: 10px;
	}

	&.error {
		.radio-option:not(:active) {
			background: $dark-err-col;
			border-color: $alert-col;
		}
	}
}

// Checkbox
.inp-checkbox {
	.checkbox {
		position: relative;
		width: 1.8em;
		height: 1.8em;
		background: transparent;
		border: 1px solid $wireframe-outline-col;
		padding: 0;
		outline: none;
		border-radius: 1px;
		flex-shrink: 0;

		&:focus {
			border-color: $main-col
		}

		.icon {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
		}
	}

	&.error button {
		background: $dark-err-col;
		border-color: $alert-col;
	}

	.label {
		cursor: pointer;
		margin-left: 10px;
		font-size: 90%;
		user-select: none;
	}
}

// Dropdown
$dropdown-height: 30px;
$dropdown-padding: 10px;
$dropdown-mobile-padding: 30px;

.inp-dropdown {
	position: relative;
	width: 100%;
	height: $dropdown-height;
	// min-width: 200px;
	max-width: 100%;
	border: 1px solid $wireframe-outline-col;
	outline: none;
	text-align: left;
	padding: 0;
	background: black;
	user-select: none;

	.mobi-focus,
	.focus-probe {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		border: none;
		outline: none;
		opacity: 0;
		cursor: pointer;
	}

	.mobi-focus {
		display: none;
	}

	.dropdown-option {
		line-height: $dropdown-height;
		height: $dropdown-height;
		padding: 0 $dropdown-padding;
		white-space: nowrap;
		cursor: pointer;

		&.dropdown-active-option {
			padding-right: $dropdown-height + $dropdown-padding;

			> .icon {
				position: absolute;
				top: 0;
				right: 0;
				height: 100%;
			}
		}

		&.selected .dropdown-option-inner {
			opacity: 0.5;
		}

		+ .dropdown-option {
			border-top: 1px solid rgba(128, 128, 128, 0.25);
		}

		.dropdown-option-inner {
			height: 100%;
		}

		.placeholder {
			opacity: 0.6;
			font-style: italic;
		}
	}

	.dropdown-list {
		display: none;
		position: absolute;
		box-sizing: content-box;
		border: inherit;
		background: inherit;
		overflow: auto;
	}

	&:not(.open):not(.error) {
		background: transparent !important;
	}

	&.open {
		.focus-probe {
			height: 0;
		}

		.dropdown-list {
			display: block;
			z-index: 100000;
		}
	}

	&.error {
		&:not(.open) {
			background: $dark-err-col;
			border-color: $alert-col;

			.placeholder {
				opacity: 1;
			}
		}
	}
}

@include mobile {
	.inp-dropdown {
		&.open {
			.collapse-target {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: inherit;
				opacity: 0.8;
				z-index: 100000;
			}

			.dropdown-list {
				position: fixed;
				top: 50%;
				left: $dropdown-mobile-padding;
				right: $dropdown-mobile-padding;
				width: auto;
				max-height: 90%;
				max-height: calc(100% - #{$dropdown-mobile-padding * 2});
				transform: translateY(-50%);
				z-index: 100001;
			}
		}

		.mobi-focus {
			display: block;
		}

		.focus-probe {
			display: none;
		}
	}
}
